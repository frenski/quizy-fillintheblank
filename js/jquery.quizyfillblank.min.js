Array.indexOf||(Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]==e)return t;return-1}),function(e){e.fn.quizyFillBlank=function(t){var n,a=e.extend({},e.fn.quizyFillBlank.defaults,t),r=a.textItems,d=a.anItemsCorrect,i=a.anItems,l=i.length,s=d.length,o=0,c=0,h=0,u=e("#"+a.elementAnId),p=e("#"+a.elementTextId);var f=function(){c++};function g(e,t,n,a){e.addEventListener?e.addEventListener(t,n,a):e.attachEvent&&e.attachEvent("on"+t,n)}function b(t){var n=t.changedTouches[0],a="";switch(t.type){case"touchstart":a="mousedown";break;case"touchmove":a="mousemove";break;case"touchend":a="mouseup";break;default:return}var r=document.createEvent("MouseEvent");r.initMouseEvent(a,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),n.target.dispatchEvent(r),(e(t.target).hasClass("draggable-element")||e(t.target).parent().hasClass("draggable-element"))&&t.preventDefault()}a.allowTouchDrag&&(g(document,"touchstart",b,!0),g(document,"touchmove",b,!0),g(document,"touchend",b,!0),g(document,"touchcancel",b,!0));for(var m=0;m<s;m++)if(p.append("<span>"+r[m]+'</span> <span id="'+a.phId+m+'" style="width:'+a.blockSize+"px; height:"+a.blockSizeHeight+'px; " class="droppable-element quizy-fitb-droptarget"></span>'),m==s-1){var I=m+1;p.append("<span>"+r[I]+"</span>")}var v=u;for(m=0;m<l;m++)v.append('<div id="'+a.answerId+m+'" class="quizy-fitb-answer draggable-element quizy-fitb-dropelement" style="width:'+a.blockSize+"px; height: "+a.blockSizeHeight+'px;">'+i[m]+"</div>"),e("#"+a.answerId+m).append('<div id="'+a.checkId+m+'" class="quizy-fitb-res quizy-fitb-res-no '+a.checkId+'">x</div>'),e("#"+a.answerId+m).append('<div id="'+a.numberId+m+'" class="quizy-fitb-res quizy-fitb-res-num '+a.checkId+'">'+(parseInt(d.indexOf(m))+1)+"</div>");e(".draggable-element").draggable({cursor:"move",containment:"document",stop:function(e,t){parseInt(t.offset.left),parseInt(t.offset.top)},revert:!0}),e(".droppable-element").droppable({drop:function(t,r){e(this).droppable("disable"),r.draggable.addClass("quizy-fitb-dropelement-disabled"),r.draggable.draggable("disable"),r.draggable.position({of:e(this),my:"left top",at:"left top"}),r.draggable.draggable("option","revert",!1);var i=e(this).attr("id"),l=i.substring(a.phId.length,i.length),u=(i=r.draggable.attr("id")).substring(a.answerId.length,i.length);d[l]==u&&(e("#"+a.checkId+u).removeClass("quizy-fitb-res-no").addClass("quizy-fitb-res-yes"),e("#"+a.checkId+u).html("&#10003"),h++),0==o&&(n=setInterval(f,1e3)),++o==s&&(clearInterval(n),e("."+a.checkId).fadeIn(),e("."+a.numberId).fadeIn(),""!=a.onFinishCall&&a.onFinishCall({correct_answers:h,all_answers:s,time:c}))},hoverClass:"quizy-fitb-droptarget-hover"});for(m=0;m<l;m++)e("#"+a.checkId+m).position({of:e("#"+a.answerId+m),my:"right center ",at:"right center",offset:"0 5px"}),e("#"+a.numberId+m).position({of:e("#"+a.answerId+m),my:"right center",at:"right center",offset:"10px -10px"}),e("#"+a.checkId+m).hide(),e("#"+a.numberId+m).hide();""!=a.onLoadCall&&a.onLoadCall()},e.fn.quizyFillBlank.defaults={elementAnId:"fillblank-ph",textItems:["Text part1","text part 2","text part 3"],elementTextId:"fillblank-text",anItems:["an1","an2","an3"],anItemsCorrect:[2,0],answerId:"d-answer",phId:"d-nest",checkId:"d-check",numberId:"d-number",blockSize:100,blockSizeHeight:20,onFinishCall:"",onLoadCall:"",allowTouchDrag:!0}}(jQuery);
